\documentclass{article}
\usepackage[utf8]{inputenc}
\usepackage[russian]{babel}
\usepackage{cmap}

\begin{document}
В выпуклой оболочке столько же вершин, сколько и сторон в случае, если она невырожденная.
Поэтому задача сводится к тому, чтобы для каждой пары несовпадающих точек $A$ и $B$ определить, сколько подмножеств содержат $AB$ как сторону выпуклой оболочки, а также обработать вырожденные случаи.
Объединим совпадающие точки из входных данных в одну с весом, равным количеству совпадающих.
Далее везде будем считать, что точка ~--- это не только координаты, но еще и вес.
Зафиксируем $A$. Все остальные точки упорядочим по полярному углу относительно $A$ (можно, например, считать, что точки верхней полуплоскости будут идти раньше точек нижней).
Для каждой точки нам будет важно только расстояние (квадрат расстояния) до A и ее вес, координаты можно забыть.
Возьмем самую первую точку $B0$.
Обозначим $S1$ и $S2$ - множества точек в верхней и нижней полуплоскостях от прямой $AB_0$.
Найдем вес $S1$ и $S2$, который мы будем поддерживать во время работы.
Будем обрабатывать вектора в заданном порядке, на каждом из них точки в порядке удаления от $A$.
Пусть текущая точка $B$, между $A$ и $B$ (не включая сами $A$ и $B$) множество точек $W$, его вес известен.
Также нам известны веса $S_1$ и $S_2$.
$AB$ лежит в невырожденной выпуклой оболочке в двух случаях:
1) Если мы берем произвольный набор точек из $S1$ и $W$ и $0$ точек из $S_2$.
$(2^S_1 - 1) * 2^W$ случаев.
2) Аналогично, если берем произвольный набор точек из $S_2$ и $W$ и $0$ точек из $S_1$
$(2^S_2 - 1) * 2^W$ случаев.
$AB$ лежит в вырожденной в отрезок выпуклой оболочке, когда мы не берем точек из $S_1$ и $S_2$, а только из $W$.
Соответственно, к ответу добавляется $2 * 2^W$, т.к. в этой случае имеем $2$ вершины.
Перейдем к следующей точке, обновив веса $S_1$ и $S_2$, для чего нам нужно знать суммарный вес точек на текущем векторе и на обратном ему.
Чтобы не учитывать дважды отрезки $AB$ и $BA$, можно обходить только B из верхней полуплоскости.



\end{document}
